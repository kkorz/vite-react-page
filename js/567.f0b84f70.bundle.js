(self.webpackChunk=self.webpackChunk||[]).push([[567],{72832:function(e,t,n){"use strict";n.d(t,{D:function(){return c}});var r=n(67294),c=function(e,t){var n=(0,r.useRef)({fn:e,timer:null}).current;return(0,r.useEffect)((function(){n.fn=e}),[e]),{run:function(){n.timer&&clearTimeout(n.timer),n.timer=setTimeout((function(){n.fn()}),t)},cancel:function(){clearTimeout(n.timer),n.timer=null}}}},30748:function(e,t,n){"use strict";n.d(t,{$:function(){return u}});var r=n(2029),c=n(36384),a=n.n(c),i=n(67294),u=function(e){var t=(0,i.useMemo)((function(){var t=new(a());return"string"==typeof e?t=new(a())(Array(e)):Array.isArray(e)&&(t=new(a())(e)),t}),[]),n=(0,i.useState)(t),c=(0,r.Z)(n,2),u=c[0],o=c[1],s=(0,i.useCallback)((function(e){var t=new(a())(u);t.add(e),o(t)}),[u]),l=(0,i.useCallback)((function(e){return u.has(e)}),[u]),f=(0,i.useCallback)((function(e){var t=new(a())(u);t.delete(e),o(t)}),[u]),d=(0,i.useCallback)((function(){var e=new(a())(u);e.clear(),o(e)}),[]);return[u,{add:s,has:l,remove:f,reset:d}]}},18845:function(e,t,n){"use strict";n.d(t,{v:function(){return c}});var r=n(67294),c=function(e,t){var n=(0,r.useRef)({timer:null,fn:e}).current;return(0,r.useEffect)((function(){n.fn=e}),[e]),{run:function(){n.timer||(n.timer=setTimeout((function(){n.fn(),n.timer=null}),t))},cancel:function(){clearTimeout(n.timer),n.timer=null}}}},22639:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(67294),c=function(e){(0,r.useEffect)((function(){document&&(document.title=e)}),[e])}},6643:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var r=n(2029),c=n(67294),a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,c.useState)(e),n=(0,r.Z)(t,2),a=n[0],i=n[1],u=function(e){i(void 0===e?function(){return!a}:e)},o=function(){i(!0)},s=function(){i(!1)};return[a,{setToggle:u,setOnToggle:o,setUnToggle:s}]}},42848:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(33938),c=n(2029),a=n(20116),i=n.n(a),u=n(2991),o=n.n(u),s=n(63109),l=n.n(s),f=n(67294),d=n(17808),m=n(19650),p=n(61606),v=n(18222),h=n(27049),y=n(15873),k=n(73171),Z=(n(72832),n(30748),n(18845),n(22639),n(6643),n(94673)),g=n(93476),E=n.n(g),R=n(9669),w=n.n(R),C=n(68420),q=n(27344),T=n(39392),b=n.n(T),M=n(80129),x=n.n(M),K=new(function(){function e(t){(0,C.Z)(this,e),this.cancelReqMap=this.isMap(t)?t:new(b())}return(0,q.Z)(e,[{key:"isMap",value:function(e){if("[object Map]"===Object.prototype.toString.call(e))return!0}},{key:"generateCancelReqKey",value:function(e){var t=e.url,n=e.method,r=e.params,c=e.data;return[t,n,x().stringify(r),x().stringify(c)].join("&")}},{key:"addCancelReqKey",value:function(e,t){var n=this,r=this.generateCancelReqKey(e);e.cancelToken=e.cancelToken||new t((function(e){n.cancelReqMap.has(r)||n.cancelReqMap.set(r,e)}))}},{key:"cancelReq",value:function(e){var t=this.generateCancelReqKey(e);this.cancelReqMap.has(t)&&(this.cancelReqMap.get(t)(t),this.removeRequestKey(e))}},{key:"removeRequestKey",value:function(e){var t=this.generateCancelReqKey(e);this.cancelReqMap.delete(t)}}]),e}()),N=w().create({baseURL:"http://47.98.241.220:7001",timeout:4e3});N.interceptors.request.use((function(e){return K.cancelReq(e),K.addCancelReqKey(e,w().CancelToken),e}),(function(e){return E().reject(e)})),N.interceptors.response.use((function(e){return K.removeRequestKey(e.config),e.data}),(function(e){var t;K.removeRequestKey(e.config||{}),w().isCancel(e)&&console.log("重复请求信息："+e.message);var n=null===(t=e.response)||void 0===t?void 0:t.status;return 401===n?d.ZP.error("401：未授权"):404===n?d.ZP.error("404：资源不存在"):500===n?d.ZP.error("500：服务器错误"):d.ZP.error("未知错误"),E().reject(e)}));var P=["id"],j=["id"],S=function(e){return function(e,t){return N.get(e,{params:t})}("/api/todolist",e)},A=function(e){return function(e,t){return N.post(e,t)}("/api/todolist",e)},L=function(e){var t=e.id,n=(0,Z.Z)(e,P);return function(e,t){return N.put(e,t)}("/api/todolist/".concat(t),n)},O=function(e){var t=e.id,n=(0,Z.Z)(e,j);return function(e,t){return N.delete(e,{params:t})}("/api/todolist/".concat(t),n)},U={todolist:"vJhUk0j_dX0EaC01cYDW","todolist-title":"ZXFihxXkLPIfTpLmc392","todolist-top":"Lig0NWv9FRb7YNwSf6MQ","todolist-main-title":"LYjklH7tysh4dm6P4fG1","todolist-main-item":"qCSOBbEeGoABhVyZwat7"},D=function(){var e,t=(0,f.useState)(""),n=(0,c.Z)(t,2),a=n[0],u=n[1],s=(0,f.useState)([]),Z=(0,c.Z)(s,2),g=Z[0],E=Z[1],R=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t=e.sent,n=t.data,r=n.list,n.total,0===t.code&&E(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e=function(){R()},(0,f.useEffect)((function(){e()}),[]);var w=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,A({name:a,done:0});case 3:0===e.sent.code&&(d.ZP.success("新增成功"),R(),u(""));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L({id:t,done:1});case 2:0===e.sent.code&&(d.ZP.success("已完成"),R());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({id:t});case 2:0===e.sent.code&&(d.ZP.success("删除成功"),R());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=(0,f.useMemo)((function(){return[i()(g).call(g,(function(e){return e.done})),i()(g).call(g,(function(e){return!e.done}))]}),[g]),b=(0,c.Z)(T,2),M=b[0],x=b[1];return f.createElement("div",{className:U.todolist},f.createElement("h2",{className:U["todolist-title"]},"Todo List"),f.createElement("section",{className:U["todolist-top"]},f.createElement(m.Z,null,f.createElement(p.Z,{placeholder:"Add a task here...",onChange:function(e){u(e.target.value)},onPressEnter:w,value:a}),f.createElement(v.Z,{type:"primary",onClick:w},"Add Task"))),f.createElement("section",{className:U["todolist-main"]},f.createElement("p",{className:U["todolist-main-title"]},"Undo: ",x.length),o()(x).call(x,(function(e){return f.createElement("div",{className:U["todolist-main-item"],key:e.id},f.createElement("p",null,e.name),f.createElement("span",{style:{cursor:"pointer"}},f.createElement(m.Z,null,f.createElement(y.Z,{onClick:function(){return C(e.id)}}),f.createElement(k.Z,{onClick:function(){return q(e.id)},style:{color:"#f5222d"}}))))}))),f.createElement(h.Z,null),f.createElement("p",{className:U["todolist-main-title"]},"Done: ",M.length),o()(M).call(M,(function(e){return f.createElement("div",{className:U["todolist-main-item"],key:e.id},f.createElement("p",null," ",e.name),f.createElement(k.Z,{onClick:function(){return q(e.id)},style:{color:"#f5222d"}}))})))}},24654:function(){}}]);